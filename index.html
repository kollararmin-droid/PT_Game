<!DOCTYPE html>

<html dir="rtl" lang="fa">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>بازی جدول تناوبی – آرمین کل‌ لر</title><link href="styles.css" rel="stylesheet"/>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Arabic:wght@400;600;800;900&amp;display=swap" rel="stylesheet"/>

<!-- libs for PDF used in quiz -->
<script defer="" src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<script defer="" src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
</head>
<body>
<div class="app">
<header>
<div class="titleWrap">
<div class="titleBadge">🎮 بازی جدول تناوبی – آرمین کل‌ لر</div>
<div class="subtitle">دبیر علوم و تیزهوشان متوسطه اول</div>
</div>
<div class="tabs">
<button class="tab" id="tabLearn">آموزش جدول تناوبی</button>
<button class="tab active" id="tabQuiz">آزمون</button>
</div>
</header>
<!-- LEARN PANEL -->
<div class="panel" id="learnPanel" style="display:none">
<div class="learn-controls">
<input id="learnSearch" placeholder="جستجو: نام/نماد/Z…" type="search"/>
<label class="switch" style="display:flex;gap:6px;align-items:center">
<input id="toggleGroups" style="accent-color:#22d3ee" type="checkbox"/>
<span>نمایش رنگ خانواده‌ها</span>
</label>
<label style="display:flex;gap:6px;align-items:center">
          بلوک:
          <select id="blockFilter">
<option selected="" value="all">همه</option>
<option value="s">s</option>
<option value="p">p</option>
<option value="d">d</option>
</select>
</label>
</div>
<div class="subtabs">
<button class="sub active" id="subFlash">فلش‌کارت (چیدمان جدول)</button>
<button class="sub" id="subElement">عنصرشناسی</button>
<button class="sub" id="subFamilies">نقشه خانواده‌ها</button>
<button class="sub" id="subLife">کجا در زندگی؟</button>
<button class="sub" id="subGloss">واژه‌نامه</button>
<button class="sub" id="subTrends">روندها</button>
<button class="sub" id="subCompare">مقایسه سریع</button>
</div>
<!-- Flash grid -->
<div class="learn-view active" id="viewFlashGrid">
<div class="ptable-wrap"><div class="ptable" id="ptable"></div></div>
<div class="pt-legend">
<span class="pt-badge g1">قلیایی</span>
<span class="pt-badge g2">قلیایی خاکی</span>
<span class="pt-badge g3to12">فلزات واسطه</span>
<span class="pt-badge g17">هالوژن</span>
<span class="pt-badge g18">گاز نجیب</span>
<span class="pt-badge gOther">سایر</span>
</div>
</div>
<!-- Elementology -->
<div class="learn-view" id="viewElementology">
<div class="elist" id="elist"></div>
</div>
<!-- Families map -->
<div class="learn-view" id="viewFamilies">
<div class="ptable-wrap"><div class="ptable" id="familyTable"></div></div>
<div class="family-legend">
<div class="item"><span class="dot alkali"></span><span>قلیایی: بسیار واکنش‌پذیر (نمک‌ها، باتری‌ها)</span></div>
<div class="item"><span class="dot alkaline"></span><span>قلیایی خاکی: پوستهٔ زمین، مصالح/آلیاژ</span></div>
<div class="item"><span class="dot transition"></span><span>واسطه: فلزات صنعتی (آهن، مس…)</span></div>
<div class="item"><span class="dot halogen"></span><span>هالوژن: ضدعفونی/ترکیبات نمکی</span></div>
<div class="item"><span class="dot noble"></span><span>نجیب: گازهای پایدار (روشنایی/حفاظ)</span></div>
<div class="item"><span class="dot other"></span><span>سایر: نافلز/شبه‌فلز/پس‌واسطه</span></div>
</div>
</div>
<!-- Life uses -->
<div class="learn-view" id="viewLife">
<div class="uses" id="usesGrid"></div>
</div>
<!-- Glossary -->
<div class="learn-view" id="viewGlossary">
<div class="elist" id="glossList"></div>
</div>
<!-- Trends -->
<div class="learn-view" id="viewTrends">
<div class="trend-wrap">
<div class="trend">
<h4>افزایش عدد اتمی (Z) در یک دوره → راست‌به‌چپ</h4>
<div class="bar"><span style="animation-delay:.1s"></span></div>
<div class="tip" style="margin-top:8px">از H تا Kr مقدار Z پیوسته زیاد می‌شود.</div>
</div>
<div class="trend">
<h4>کاهش شعاع اتمی در یک دوره</h4>
<div class="bar"><span style="animation-delay:.2s"></span></div>
<div class="tip" style="margin-top:8px">جذب هسته قوی‌تر می‌شود → الکترون‌ها نزدیک‌تر.</div>
</div>
<div class="trend">
<h4>افزایش خاصیت فلزی در یک گروه (رو به پایین)</h4>
<div class="bar"><span style="animation-delay:.3s"></span></div>
<div class="tip" style="margin-top:8px">از بالا به پایین واکنش‌پذیری فلزی بیشتر می‌شود.</div>
</div>
</div>
</div>
<!-- Compare -->
<div class="learn-view" id="viewCompare">
<div class="cmp-wrap">
<select id="cmpA" style="min-width:160px"></select>
<select id="cmpB" style="min-width:160px"></select>
<button class="primary" id="cmpBtn">مقایسه</button>
</div>
<div class="report cmp-out" id="cmpOut"></div>
</div>
</div>
<!-- QUIZ PANEL (نسخه قبلی) -->
<div class="panel" id="quizPanel">
<div id="question">برای شروع، روی «شروع بازی» بزن؛ بعد سطح دشواری رو انتخاب کن.</div>
<div id="hint">پیشنهاد: روی موبایل زمان بیشتری داری تا با خیال راحت لمس کنی.</div>
<div class="stats">
<div class="stat">سؤال: <span id="qIndex">0</span> / <span id="qTotal">7</span></div>
<div class="stat">امتیاز: <span id="score">0</span></div>
<div class="stat" id="timeStat">زمان باقی‌مانده: <span id="timer">—</span> ثانیه</div>
<div class="stat">سطح: <span id="diffLabel">—</span></div>
<div class="stat">حالت:
          <select id="mode">
<option selected="" value="random">تصادفی</option>
<option value="sequential">ترتیبی</option>
</select>
</div>
<div class="stat" style="display:flex;gap:6px;align-items:center">
<span>👤 بازیکن:</span>
<input id="playerName" placeholder="نام شما" style="min-width:160px" type="text"/>
<span id="playerNameLabel" style="opacity:.8"></span>
</div>
<button class="ghost" id="helpBtn" style="display:none">راهنما</button>
<button aria-label="۵۰–۵۰: نیمی از گزینه‌ها حذف می‌شود" class="warn" id="fiftyBtn" style="display:none" title="۵۰–۵۰: نیمی از گزینه‌ها حذف می‌شود">۵۰–۵۰</button>
<button class="ghost" id="muteBtn">🔊 صدا روشن</button>
<button class="primary" id="startBtn">شروع بازی</button>
<button class="primary" id="restart" style="display:none">شروع دوباره</button>
<button class="ghost" id="toggleHistory">نمایش تاریخچه</button>
</div>
<div aria-hidden="true" class="progress">
<div class="bar" id="progBar"></div>
<div class="txt" id="progTxt">0%</div>
</div>
</div>
<div class="panel" id="gridPanel">
<div class="grid" id="table"></div>
</div>
<!-- HISTORY -->
<div class="panel" id="historyPanel" style="display:none">
<div class="history-head">
<strong>📈 تاریخچهٔ رقابت با خودم</strong>
<div><button class="ghost" id="clearHistory">پاک‌کردن تاریخچه</button></div>
</div>
<div class="report" id="historyBody"></div>
</div>
<!-- SOCIAL -->
<div class="panel">
<div class="social">
<div style="flex:1;min-width:220px">
<div style="font-weight:800;margin-bottom:6px">کلاس علوم آرمین کل‌لر — آموزش و بازی‌های تعاملی. همین حالا عضو شو/فالو کن.</div>
</div>
<a class="tg" href="https://t.me/Alchemist_Amozeshe_Oloum" rel="noopener" target="_blank">عضویت در تلگرام</a>
<a class="ig" href="https://www.instagram.com/arminkollar.kimiagar/?hl=en" rel="noopener" target="_blank">فالو اینستاگرام</a>
</div>
</div>
</div>
<!-- Overlays needed for quiz -->
<div aria-modal="true" class="overlay" id="diffOverlay" role="dialog">
<div class="modal" role="document">
<h3>سطح دشواری را انتخاب کن</h3>
<div class="diff-grid">
<div class="diff-card easy">
<h4>آسان</h4>
<small>۵ سؤال • زمان موبایل ۱۶s / دسکتاپ ۱۲s • محدوده عناصر ۱–۱۸ • دکمه راهنما + ۵۰–۵۰</small>
<div class="cta"><button class="primary" id="chooseEasy">شروع با آسان</button></div>
</div>
<div class="diff-card">
<h4>متوسط</h4>
<small>۷ سؤال • زمان موبایل ۱۴s / دسکتاپ ۱۰s • کل عناصر ۱–۳۶</small>
<div class="cta"><button class="primary" id="chooseMedium">شروع با متوسط</button></div>
</div>
<div class="diff-card hard">
<h4>پیشرفته</h4>
<small>۱۰ سؤال • زمان موبایل ۱۲s / دسکتاپ ۹s • کل عناصر ۱–۳۶</small>
<div class="cta"><button class="primary" id="chooseHard">شروع با پیشرفته</button></div>
</div>
</div>
<div><button class="ghost" id="cancelDiff">بازگشت</button></div>
</div>
</div>
<div aria-modal="true" class="overlay" id="overlay" role="dialog">
<div class="modal" role="document">
<div class="big" id="modalIcon">✅</div>
<h3 id="modalTitle">آفرین! پاسخ درست بود</h3>
<div id="modalMsg">تو مثل یک دانشمند واقعی فکر کردی!</div>
<div class="pts" id="modalPts">+10 امتیاز • امتیاز فعلی: 10</div>
<div class="badges" id="badgesRow" style="display:none"></div>
<div class="correct-info" id="correctInfo" style="display:none"></div>
<div class="report" id="report"></div>
<div class="cta" style="display:flex;gap:8px;justify-content:center;flex-wrap:wrap">
<button class="primary" id="pdfBtn">دانلود گزارش PDF</button>
<button class="ghost" id="showHistoryBtn">نمایش تاریخچه</button>
<button class="primary" id="nextBtn">ادامه</button>
</div>
</div>
</div>
<!-- Hidden DOM for PDF capture -->
<div dir="rtl" id="pdfDom" style="position:fixed;left:-10000px;top:-10000px;width:794px;background:#fff;color:#0b1220;padding:24px;font-family:'IBM Plex Sans Arabic',sans-serif"></div>

<script defer="True" src="script.js"></script></body>
</html>
